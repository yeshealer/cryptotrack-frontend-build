(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[675],{3057:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/coin-flow",function(){return t(1283)}])},1283:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return _}});var r=t(8520),a=t.n(r),s=t(5893),i=t(7294),o=t(1536),c=t(6242),u=t(6886),l=t(7357),d=t(2715),m=t(9086),p=t(3029),f=t(7312),h=t(3931),b=t(4054),x=t(8456),y=t(1613),v=t(4799),k=t(6863),w=t(6872),g=t(2890),$=t(480),j=t(2482),Z=t(7609),S=t(3121),T=t(5336),I=t(9497),D=t(2265),C=t(4492),q=t(6540),N=t(4895),O=t(8117);function E(n,e,t,r,a,s,i){try{var o=n[s](i),c=o.value}catch(u){return void t(u)}o.done?e(c):Promise.resolve(c).then(r,a)}function A(n){return function(){var e=this,t=arguments;return new Promise((function(r,a){var s=n.apply(e,t);function i(n){E(s,r,a,i,o,"next",n)}function o(n){E(s,r,a,i,o,"throw",n)}i(void 0)}))}}var z='\n  query ($network: EthereumNetwork!, $address: String!, $inboundDepth: Int!, $outboundDepth: Int!, $limit: Int!, $currency: String!, $from: ISO8601DateTime, $till: ISO8601DateTime) {\n    ethereum(network: $network) {\n      inbound: coinpath(\n        initialAddress: {is: $address}\n        currency: {is: $currency}\n        depth: {lteq: $inboundDepth}\n        options: {direction: inbound, asc: "depth", desc: "amount", limitBy: {each: "depth", limit: $limit}}\n        date: {since: $from, till: $till}\n      ) {\n        sender {\n          address\n          annotation\n          smartContract {\n            contractType\n            currency {\n              symbol\n              name\n            }\n          }\n        }\n        receiver {\n          address\n          annotation\n          smartContract {\n            contractType\n            currency {\n              symbol\n              name\n            }\n          }\n        }\n        amount\n        currency {\n          symbol\n        }\n        depth\n        count\n      }\n      outbound: coinpath(\n        initialAddress: {is: $address}\n        currency: {is: $currency}\n        depth: {lteq: $outboundDepth}\n        options: {asc: "depth", desc: "amount", limitBy: {each: "depth", limit: $limit}}\n        date: {since: $from, till: $till}\n      ) {\n        sender {\n          address\n          annotation\n          smartContract {\n            contractType\n            currency {\n              symbol\n              name\n            }\n          }\n        }\n        receiver {\n          address\n          annotation\n          smartContract {\n            contractType\n            currency {\n              symbol\n              name\n            }\n          }\n        }\n        amount\n        currency {\n          symbol\n        }\n        depth\n        count\n      }\n    }\n  }\n',P=[{label:"Bitcoin",value:"bitcoin",nativeToken:"BTC",query:'\n  query ($network: BitcoinNetwork!, $address: String!, $inboundDepth: Int!, $outboundDepth: Int!, $limit: Int!, $from: ISO8601DateTime, $till: ISO8601DateTime) {\n    bitcoin(network: $network) {\n      inbound: coinpath(\n        initialAddress: {is: $address}\n        depth: {lteq: $inboundDepth}\n        options: {direction: inbound, asc: "depth", desc: "amount", limitBy: {each: "depth", limit: $limit}}\n        date: {since: $from, till: $till}\n      ) {\n        sender {\n          address\n          annotation\n        }\n        receiver {\n          address\n          annotation\n        }\n        amount\n        depth\n        count\n      }\n      outbound: coinpath(\n        initialAddress: {is: $address}\n        depth: {lteq: $outboundDepth}\n        options: {asc: "depth", desc: "amount", limitBy: {each: "depth", limit: $limit}}\n        date: {since: $from, till: $till}\n      ) {\n        sender {\n          address\n          annotation\n        }\n        receiver {\n          address\n          annotation\n        }\n        amount\n        depth\n        count\n      }\n    }\n  }\n'},{label:"Ethereum",value:"ethereum",nativeToken:"ETH",query:z},{label:"Binance",value:"bsc",nativeToken:"BNB",query:z},{label:"Polygon",value:"matic",nativeToken:"MATIC",query:z},{label:"Tron",value:"tron",nativeToken:"TRX",query:'\n  query ($address: String!, $inboundDepth: Int!, $outboundDepth: Int!, $limit: Int!, $currency: String!, $from: ISO8601DateTime, $till: ISO8601DateTime) {\n    tron {\n      inbound: coinpath(\n        initialAddress: {is: $address}\n        currency: {is: $currency}\n        depth: {lteq: $inboundDepth}\n        options: {direction: inbound, asc: "depth", desc: "amount", limitBy: {each: "depth", limit: $limit}}\n        date: {since: $from, till: $till}\n      ) {\n        sender {\n          address\n          annotation\n          smartContract {\n            contractType\n            currency {\n              symbol\n              name\n            }\n          }\n        }\n        receiver {\n          address\n          annotation\n          smartContract {\n            contractType\n            currency {\n              symbol\n              name\n            }\n          }\n        }\n        amount\n        currency {\n          symbol\n        }\n        depth\n        count\n      }\n      outbound: coinpath(\n        initialAddress: {is: $address}\n        currency: {is: $currency}\n        depth: {lteq: $outboundDepth}\n        options: {asc: "depth", desc: "amount", limitBy: {each: "depth", limit: $limit}}\n        date: {since: $from, till: $till}\n      ) {\n        sender {\n          address\n          annotation\n          smartContract {\n            contractType\n            currency {\n              symbol\n              name\n            }\n          }\n        }\n        receiver {\n          address\n          annotation\n          smartContract {\n            contractType\n            currency {\n              symbol\n              name\n            }\n          }\n        }\n        amount\n        currency {\n          symbol\n        }\n        depth\n        count\n      }\n    }\n  }\n'}];function _(){var n=(0,i.useState)([]),e=n[0],t=n[1],r=(0,i.useState)(""),E=r[0],z=r[1],_=(0,i.useState)(""),B=_[0],Y=_[1],F=(0,i.useState)([null,null]),V=F[0],H=F[1],K=(0,i.useState)(""),M=K[0],R=K[1],J=(0,i.useState)(""),L=J[0],X=J[1],Q=(0,i.useState)(!1),G=Q[0],U=Q[1],W=(0,i.useState)(!1),nn=W[0],en=W[1],tn=(0,i.useState)(!1),rn=tn[0],an=tn[1],sn=(0,i.useState)(!1),on=sn[0],cn=sn[1],un=(0,i.useState)(10),ln=un[0],dn=un[1],mn=(0,i.useState)("graph"),pn=mn[0],fn=mn[1],hn=(0,i.useState)(1),bn=hn[0],xn=hn[1],yn=(0,i.useState)(1),vn=yn[0],kn=yn[1],wn=new Date,gn=String(wn.getDate()).padStart(2,"0"),$n=String(wn.getMonth()+1).padStart(2,"0"),jn=wn.getFullYear(),Zn="2000-01-01";V[0]&&(Zn=V[0].format().slice(0,10));var Sn=jn+"-"+$n+"-"+gn;V[1]&&(Sn=V[1].format().slice(0,10));var Tn=new Headers;Tn.append("Content-Type","application/json"),Tn.append("X-API-KEY","BQYxjn5Pn9mtvzCklThZE9sEuEnegKO6");var In=A(a().mark((function n(e,r,s,i,o){var c,u,l,d,m,p,f,h,b,x,y,v,k,w,g,$,j;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||""===e){n.next=110;break}if(!B||""===B){n.next=107;break}if(u=null===(c=P.find((function(n){return n.value===B})))||void 0===c?void 0:c.nativeToken,an(!0),!e.match("^0x[a-fA-F0-9]{40}$")){n.next=35;break}if(["ethereum","bsc","matic"].includes(B)){n.next=10;break}U(!0),n.next=33;break;case 10:return cn(!0),d=JSON.stringify({query:"query ($network: EthereumNetwork!, $address: String!) {\n  ethereum(network: $network) {\n    address(address: {is: $address}) {\n      balances {\n        currency {\n          address\n          symbol\n        }\n      }\n    }\n  }\n}\n",variables:'{\n  "limit": 100,\n  "offset": 0,\n  "network": "'.concat(B,'",\n  "address": "').concat(e,'"\n}')}),n.next=15,Cn(d);case 15:if(m=n.sent.ethereum.address[0].balances,t(m.filter((function(n){return n.currency.symbol===u||"-"!==n.currency.address})).map((function(n){return{label:n.currency.symbol,value:n.currency.symbol}}))),p=null===(l=m.find((function(n){return n.currency.symbol===r})))||void 0===l?void 0:l.currency.address,f=r?r===u?u:p:M,!s){n.next=30;break}if("graph"!==s){n.next=25;break}return n.next=23,On(f,i,o);case 23:n.next=28;break;case 25:if("sankey"!==s){n.next=28;break}return n.next=28,En(f,i,o);case 28:n.next=32;break;case 30:return n.next=32,On(f,i,o);case 32:R(r||M);case 33:n.next=104;break;case 35:if(!e.match("^(bc1|[13])[a-zA-HJ-NP-Z0-9]{25,39}$")){n.next=51;break}if("bitcoin"===B){n.next=40;break}U(!0),n.next=49;break;case 40:if(cn(!1),"graph"!==s){n.next=46;break}return n.next=44,On();case 44:n.next=49;break;case 46:if("sankey"!==s){n.next=49;break}return n.next=49,En();case 49:n.next=104;break;case 51:if(!e.match("^(T|t)[a-zA-Z0-9]")){n.next=76;break}if("tron"===B){n.next=56;break}U(!0),n.next=74;break;case 56:return cn(!0),b=JSON.stringify({query:"query ($network: TronNetwork!, $address: String!) {\n  tron(network: $network) {\n    address(address: {is: $address}) {\n      balances {\n        currency {\n          address\n          symbol\n        }\n      }\n    }\n  }\n}\n",variables:'{\n  "limit": 100,\n  "offset": 0,\n  "network": "tron",\n  "address": "'.concat(e,'"\n}')}),n.next=61,Cn(b);case 61:if(x=n.sent.tron.address[0].balances,t(x.filter((function(n){return n.currency.symbol===u||"-"!==n.currency.address})).map((function(n){return{label:n.currency.symbol,value:n.currency.symbol}}))),y=null===(h=x.find((function(n){return n.currency.symbol===r})))||void 0===h?void 0:h.currency.address,v=r?r===u?u:y:M,"graph"!==s){n.next=70;break}return n.next=68,On(v);case 68:n.next=73;break;case 70:if("sankey"!==s){n.next=73;break}return n.next=73,En(v);case 73:R(r||M);case 74:n.next=104;break;case 76:if(!e.match("^(r)[a-zA-Z0-9]")){n.next=104;break}if("ripple"===B){n.next=81;break}U(!0),n.next=104;break;case 81:return cn(!0),w=JSON.stringify({query:'query ($network: RippleNetwork!, $address: String!, $from: ISO8601DateTime, $till: ISO8601DateTime, $limit: Int!, $offset: Int!) {\n  ripple(network: $network) {\n    transfers(\n      date: {since: $from, till: $till}\n      receiver: {is: $address}\n      options: {limit: $limit, offset: $offset, desc: "count_in"}\n    ) {\n      sum_in: amountTo(calculate: sum)\n      count_in: count\n      currencyTo {\n        symbol\n        name\n      }\n    }\n  }\n}\n',variables:'{\n  "limit": 100,\n  "offset": 0,\n  "network": "ripple",\n  "address": "'.concat(e,'",\n  "from": "').concat(Zn,'",\n  "till": "').concat(Sn,'T23:59:59",\n  "dateFormat": "%Y-%m-%d"\n}')}),n.t0=console,n.next=87,Cn(w);case 87:return n.t1=n.sent,n.t0.log.call(n.t0,n.t1),n.next=91,Cn(w);case 91:if(g=n.sent.ripple.transfers,t(g.filter((function(n){return n.currencyTo.symbol===u||"-"!==n.currencyTo.address})).map((function(n){return{label:n.currencyTo.symbol,value:n.currencyTo.symbol}}))),$=null===(k=g.find((function(n){return n.currencyTo.symbol===r})))||void 0===k?void 0:k.currencyTo.address,j=r?r===u?u:$:M,"graph"!==s){n.next=100;break}return n.next=98,On(j);case 98:n.next=103;break;case 100:if("sankey"!==s){n.next=103;break}return n.next=103,En(j);case 103:R(r||M);case 104:an(!1),n.next=108;break;case 107:U(!0);case 108:n.next=111;break;case 110:en(!0);case 111:case"end":return n.stop()}}),n)}))),Dn=A(a().mark((function n(e){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("Enter"!==e.key||!e.shiftKey){n.next=4;break}return n.abrupt("return");case 4:if("Enter"!==e.key){n.next=7;break}return n.next=7,In(E,M,pn,bn,vn);case 7:case"end":return n.stop()}}),n)}))),Cn=A(a().mark((function n(e){var t,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],r={method:"POST",headers:Tn,body:e},n.next=4,fetch("https://graphql.bitquery.io",r).then((function(n){return n.json()})).then((function(n){t=n.data})).catch((function(n){return console.log("error",n)}));case 4:return n.abrupt("return",t);case 5:case"end":return n.stop()}}),n)}))),qn=A(a().mark((function n(e){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return R(e.target.value),n.next=3,In(E,e.target.value,pn,bn,vn);case 3:case"end":return n.stop()}}),n)}))),Nn=A(a().mark((function n(e){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return fn(e.target.value),t=e.target.value,n.next=4,In(E,M,t,bn,vn);case 4:case"end":return n.stop()}}),n)}))),On=A(a().mark((function n(e,t,r){var s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,S.IO)(L);case 2:return s=n.sent,n.next=5,(0,S.Es)("#graph",s,{theme:"dark"});case 5:if(console.log(e,"----------------------"),!e){n.next=11;break}return n.next=9,s.request({address:E,network:B,inboundDepth:t||1,outboundDepth:r||1,currency:e,from:Zn,till:Sn,dateFormat:"%Y-%m",limit:ln});case 9:n.next=13;break;case 11:return n.next=13,s.request({address:E,network:B,inboundDepth:t||1,outboundDepth:r||1,from:Zn,till:Sn,dateFormat:"%Y-%m",limit:ln});case 13:case"end":return n.stop()}}),n)}))),En=A(a().mark((function n(e,t,r){var s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,S.IO)(L);case 2:return s=n.sent,n.next=5,(0,S.DM)("#graph",s,{theme:"dark"});case 5:if(!e){n.next=10;break}return n.next=8,s.request({address:E,network:B,inboundDepth:t||1,outboundDepth:r||1,currency:e,from:Zn,till:Sn,dateFormat:"%Y-%m",limit:ln});case 8:n.next=12;break;case 10:return n.next=12,s.request({address:E,network:B,inboundDepth:t||1,outboundDepth:r||1,from:Zn,till:Sn,dateFormat:"%Y-%m",limit:ln});case 12:case"end":return n.stop()}}),n)}))),An=A(a().mark((function n(e){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=/^[0-9\b]+$/,(""===e.target.value||t.test(e.target.value))&&Number(e.target.value)>0&&xn(Number(e.target.value));case 2:case"end":return n.stop()}}),n)}))),zn=A(a().mark((function n(e){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=/^[0-9\b]+$/,(""===e.target.value||t.test(e.target.value))&&Number(e.target.value)>0&&kn(Number(e.target.value));case 2:case"end":return n.stop()}}),n)}))),Pn=function(n){var e=n.value,t=n.actionValue,r=n.isIn,i=A(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t(e+1),!r){n.next=6;break}return n.next=4,In(E,M,pn,e+1,vn);case 4:n.next=8;break;case 6:return n.next=8,In(E,M,pn,bn,e+1);case 8:case"end":return n.stop()}}),n)}))),o=A(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e>1)){n.next=9;break}if(t(e-1),!r){n.next=7;break}return n.next=5,In(E,M,pn,e-1,vn);case 5:n.next=9;break;case 7:return n.next=9,In(E,M,pn,bn,e-1);case 9:case"end":return n.stop()}}),n)})));return(0,s.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)(v.Z,{size:"small","aria-label":"fingerprint",color:"success",onClick:i,children:(0,s.jsx)(q.Z,{fontSize:"inherit"})}),(0,s.jsx)(v.Z,{size:"small","aria-label":"fingerprint",color:"error",onClick:o,children:(0,s.jsx)(N.Z,{fontSize:"inherit"})})]})};return(0,i.useEffect)((function(){(0,S.S1)("https://graphql.bitquery.io","https://graphql.bitquery.io/ide/api/querytransfer","BQY9Ovm30EC2gALkLCctTCKDAmhUc7cE")}),[]),(0,i.useEffect)((function(){var n,e=null===(n=P.find((function(n){return n.value===B})))||void 0===n?void 0:n.nativeToken;R(e)}),[B]),(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(u.ZP,{container:!0,spacing:6,children:[(0,s.jsx)(u.ZP,{item:!0,xs:12,children:(0,s.jsx)(Z.Z,{handleChangeNetwork:function(n){var e;Y(n.target.value),X(null===(e=P.find((function(e){return e.value===n.target.value})))||void 0===e?void 0:e.query),xn(1),xn(1),dn(10),fn("graph")},network:B,dateRange:V,setDateRange:H,NetworkList:P})}),(0,s.jsx)(u.ZP,{item:!0,xs:12,children:(0,s.jsx)(d.Z,{size:"medium",sx:{"& .MuiOutlinedInput-root":{borderRadius:4},width:"100%"},InputProps:{startAdornment:(0,s.jsx)(m.Z,{position:"start",children:(0,s.jsx)(I.Z,{fontSize:"medium"})}),endAdornment:(0,s.jsx)(m.Z,{position:"end",sx:{cursor:"pointer"},onClick:function(){fn("graph"),In(E)},children:(0,s.jsx)(D.Z,{fontSize:"medium"})})},value:E,onChange:function(n){return z(n.target.value)},onKeyDown:function(n){return Dn(n)},placeholder:"Input your wallet address"})})]}),(0,s.jsxs)(c.Z,{sx:{mt:4,position:"relative"},children:[rn&&(0,s.jsx)(l.Z,{sx:{width:"100%",cursor:"default",height:"calc(100vh - 260px)",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},children:(0,s.jsx)(x.Z,{size:100})}),(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(l.Z,{sx:{position:"absolute",top:10,right:10,zIndex:1,gap:5},children:[(0,s.jsxs)(g.Z,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:pn,onChange:Nn,children:[(0,s.jsx)($.Z,{value:"graph",control:(0,s.jsx)(w.Z,{}),label:"Graph"}),(0,s.jsx)($.Z,{value:"sankey",control:(0,s.jsx)(w.Z,{}),label:"Sankey"})]}),on&&(0,s.jsxs)(b.Z,{size:"small",sx:{minWidth:200,mt:3},children:[(0,s.jsx)(f.Z,{id:"demo-simple-select-token",children:"Select Token"}),(0,s.jsx)(j.Z,{labelId:"demo-simple-select-token",id:"demo-simple-select",value:M,onChange:qn,label:"Select Token",sx:{"& .MuiSelect-select":{display:"flex",alignItems:"center"}},children:e.map((function(n){return(0,s.jsx)(h.Z,{value:n.value,children:n.label},n.value)}))})]}),"graph"===pn&&(0,s.jsx)(l.Z,{sx:{width:200,mt:10},children:(0,s.jsxs)(o.Z,{spacing:2,direction:"row",sx:{mb:1},alignItems:"center",children:[(0,s.jsx)(O.Z,{}),(0,s.jsx)(y.ZP,{"aria-label":"Volume",value:ln,onChange:function(n,e){dn(e)},valueLabelDisplay:"on",onChangeCommitted:A(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,In(E,M,pn,bn,vn);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))}),(0,s.jsx)(C.Z,{})]})}),(0,s.jsxs)(l.Z,{sx:{mt:5},children:[(0,s.jsxs)(o.Z,{sx:{width:200,alignItems:"center",justifyContent:"space-between"},direction:"row",spacing:1,children:[(0,s.jsx)(d.Z,{label:"Inbound",id:"Inbound",size:"small",defaultValue:1,value:bn,onChange:function(n){return An(n)}}),(0,s.jsx)(k.Z,{orientation:"vertical","aria-label":"vertical outlined button group",children:(0,s.jsx)(Pn,{value:bn,actionValue:xn,isIn:!0})})]}),(0,s.jsxs)(o.Z,{sx:{width:200,alignItems:"center",justifyContent:"space-between"},direction:"row",spacing:1,children:[(0,s.jsx)(d.Z,{label:"Outbound",id:"Outbound",size:"small",defaultValue:1,value:vn,onChange:function(n){return zn(n)}}),(0,s.jsx)(k.Z,{orientation:"vertical","aria-label":"vertical outlined button group",children:(0,s.jsx)(Pn,{value:vn,actionValue:kn,isIn:!1})})]})]})]}),(0,s.jsx)(o.Z,{id:"graph",className:"graph",sx:{width:"100%",cursor:"default",height:"calc(100vh - 260px)"}})]})]}),(0,s.jsx)(p.Z,{open:G,autoHideDuration:4e3,onClose:function(){return U(!1)},children:(0,s.jsx)(T.Alert,{onClose:function(){return U(!1)},severity:"warning",sx:{width:"100%"},children:"Please select correct network!"})}),(0,s.jsx)(p.Z,{open:nn,autoHideDuration:4e3,onClose:function(){return en(!1)},children:(0,s.jsx)(T.Alert,{onClose:function(){return en(!1)},severity:"warning",sx:{width:"100%"},children:"Please input your wallet address!"})})]})}}},function(n){n.O(0,[380,805,886,482,229,109,454,714,362,496,911,315,336,774,888,179],(function(){return e=3057,n(n.s=e);var e}));var e=n.O();_N_E=e}]);